{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46054500-d9995bae73a62b965b4fbf26c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page, \n    per_page: 15,  \n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function initializeLightbox() {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport function refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nexport function createImageCards(images, gallery) {\n  const markup = images.map(image => `\n    <li class=\"gallery-item\">\n      <div class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\" class=\"link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b class=\"name-info\">Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b class=\"name-info\">Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b class=\"name-info\">Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b class=\"name-info\">Downloads</b> ${image.downloads}</p>\n        </div>\n      </div>\n    </li>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  \n  refreshLightbox();\n}\n\nexport function clearGallery(gallery) {\n  gallery.innerHTML = ''; \n}\n\nexport function showLoader(loadingIndicator) {\n  loadingIndicator.classList.remove('hidden');\n  loadingIndicator.style.display = 'block'; \n}\n\nexport function hideLoader(loadingIndicator) {\n  loadingIndicator.classList.add('hidden');\n  loadingIndicator.style.display = 'none'; \n}\n\nexport function showLoadMoreButton(loadMoreButton) {\n  loadMoreButton.classList.remove('hidden');\n  loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadMoreButton(loadMoreButton) {\n  loadMoreButton.classList.add('hidden');\n  loadMoreButton.style.display = 'none';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { \n  createImageCards, \n  clearGallery, \n  showLoader, \n  hideLoader, \n  showLoadMoreButton, \n  hideLoadMoreButton, \n  initializeLightbox \n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadingIndicator = document.querySelector('#loading-indicator');\nconst loadMoreButton = document.querySelector('#load-more');\n\ninitializeLightbox();\nhideLoadMoreButton(loadMoreButton);\n\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nloadingIndicator.classList.add('visible');\n  \nloadingIndicator.classList.remove('visible');\n\nlet page = 1;\n\nasync function onSearch(event) {\n  event.preventDefault();\n  currentQuery = event.currentTarget.elements.searchQuery.value.trim();\n  page = 1; \n\n  if (currentQuery === '') {\n    iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\n        titleColor: '#fafafb',            \n        color: '#fafafb',                 \n        backgroundColor: '#ef4040',        \n        messageColor: '#fafafb',          \n        progressBar: true,                \n        progressBarColor: '#B51B1B',      \n        iconColor: '#fafafb',             \n        timeout: 5000,                    \n        close: true,                      \n        closeOnClick: true,               \n        // overlay: true,                    \n        zindex: 9999,                     \n        transitionIn: 'fadeIn',           \n        transitionOut: 'fadeOut',         \n        pauseOnHover: true,               \n        position: 'topRight',     \n      });\n    return;\n  }\n\n  clearGallery(gallery);\n  hideLoadMoreButton(loadMoreButton); \n  showLoader(loadingIndicator); // Показати завантажувач\n\n  try {\n    const data = await fetchImages(currentQuery, page); \n    hideLoader(loadingIndicator); // Сховати завантажувач\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please, try again!',\n        titleColor: '#fafafb',            \n        color: '#fafafb',                 \n        backgroundColor: '#ef4040',        \n        messageColor: '#fafafb',          \n        progressBar: true,                \n        progressBarColor: '#B51B1B',      \n        iconColor: '#fafafb',             \n        timeout: 5000,                    \n        close: true,                      \n        closeOnClick: true,               \n        // overlay: true,                    \n        zindex: 9999,                     \n        transitionIn: 'fadeIn',           \n        transitionOut: 'fadeOut',         \n        pauseOnHover: true,               \n        position: 'topRight',     \n      });\n      return;\n    }\n\n    createImageCards(data.hits, gallery);\n\n    if (data.totalHits > gallery.children.length) {\n      showLoadMoreButton(loadMoreButton); \n    }\n  } catch (error) {\n    hideLoader(loadingIndicator);\n    iziToast.error({\n         message: 'Sorry, there are no images matching your search query. Please, try again!',\n        titleColor: '#fafafb',            \n        color: '#fafafb',                 \n        backgroundColor: '#ef4040',        \n        messageColor: '#fafafb',          \n        progressBar: true,                \n        progressBarColor: '#B51B1B',      \n        iconColor: '#fafafb',             \n        timeout: 5000,                    \n        close: true,                      \n        closeOnClick: true,               \n        // overlay: true,                    \n        zindex: 9999,                     \n        transitionIn: 'fadeIn',           \n        transitionOut: 'fadeOut',         \n        pauseOnHover: true,               \n        position: 'topRight',     \n      });\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  showLoader(loadingIndicator); \n  hideLoadMoreButton(loadMoreButton); \n\n  try {\n    page += 1;  \n    const data = await fetchImages(currentQuery, page);\n    hideLoader(loadingIndicator); \n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n\n    createImageCards(data.hits, gallery);\n\n    if (data.totalHits > gallery.children.length) {\n      showLoadMoreButton(loadMoreButton);\n    } else {\n      hideLoadMoreButton(loadMoreButton);\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    hideLoader(loadingIndicator);\n    iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\n      titleColor: '#fafafb',            \n        color: '#fafafb',                 \n        backgroundColor: '#ef4040',        \n        messageColor: '#fafafb',          \n        progressBar: true,                \n        progressBarColor: '#B51B1B',      \n        iconColor: '#fafafb',             \n        timeout: 5000,                    \n        close: true,                      \n        closeOnClick: true,               \n        // overlay: true,                    \n        zindex: 9999,                     \n        transitionIn: 'fadeIn',           \n        transitionOut: 'fadeOut',         \n        pauseOnHover: true,               \n        position: 'topRight',   \n    });\n    console.error(error);\n    }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","error","lightbox","initializeLightbox","SimpleLightbox","refreshLightbox","createImageCards","images","gallery","markup","image","clearGallery","showLoader","loadingIndicator","hideLoader","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","searchForm","currentQuery","onSearch","onLoadMore","event","iziToast","data","cardHeight"],"mappings":"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"}